body {
  font-family: sans-serif;
  /* margin: 20px; */ /* REMOVE this */
  padding: 20px 0; /* ADD vertical padding (optional, adjust as needed) */
  background-color: #f4f4f4;
  margin: 0; /* Ensure no default body margin interferes */
}

.app-container {
  display: flex;
  gap: 30px;
  flex-wrap: wrap; /* Allow wrapping on smaller screens */

  /* Centering and Sizing */
  max-width: 1100px; /* Or your preferred max width */
  margin: 20px auto; /* Center horizontally, add some top/bottom margin */
  padding: 20px; /* Padding inside the container */
  box-sizing: border-box; /* Include padding/border in width calculation */

  /* --- ADD --- */
  border: 1px solid #ccc; /* Adjust color/width as needed (e.g., #bbb, 2px) */
  border-radius: 8px; /* Optional: Rounded corners */
  background-color: #ffffff; /* Give the container a solid background */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Optional: Subtle shadow */
  /* --- END ADD --- */
}

/* Keep the rest of the styles for .left-panel, .right-panel, etc. */
.left-panel {
  flex: 1;
  min-width: 250px; /* Ensure palette doesn't get too small */
  /* Add flex-basis for better control if needed, e.g., flex-basis: 300px; */
}

.right-panel {
  flex: 3;
  /* Add flex-basis for better control if needed, e.g., flex-basis: 700px; */
  /* Ensure the grid inside doesn't push the container too wide */
  min-width: 0; /* Allow shrinking if necessary */
}

/* Icon Styling */
.icon-wrapper {
  display: inline-flex; /* Use flex to center content */
  justify-content: center;
  align-items: center;
  /* Keep dimensions if needed, or let parent control */
  /* Example: width: 30px; height: 30px; */ /* This is set below specifically for action-item */
  overflow: hidden; /* Hide any part of SVG that might overflow if not scaled */
}

.svg-icon {
  display: block; /* Remove extra space below inline SVGs */
  /* REMOVE fixed width/height here if you want context-specific sizing */
  /* width: 100%; */
  /* height: 100%; */
  /* Instead, use max-width/max-height in specific contexts */
}

/* Specific sizes for different contexts (adjust as needed) */

/* --- MODIFICATION START --- */

/* Style the wrapper in the ActionItem for centering AND defining the box */
.action-item .icon-wrapper {
  width: 30px; /* Define the container width */
  height: 30px; /* Define the container height (make it square) */
  margin-bottom: 4px;
  /* display: inline-flex, justify-content, align-items are inherited or already set */
}

/* Style the SVG ICON specifically within the ActionItem */
.action-item .svg-icon {
  /* REMOVE fixed dimensions */
  /* width: 28px; */
  /* height: 28px; */

  /* ADD max dimensions to scale SVG down to fit the wrapper */
  max-width: 100%; /* Max width is the wrapper's width (30px) */
  max-height: 100%; /* Max height is the wrapper's height (30px) */

  /* Ensure it behaves like an image/block for scaling */
  object-fit: contain; /* Good practice, though max-width/height handles it */
  display: block;
}

/* --- MODIFICATION END --- */

.placed-action-icon {
  /* These can remain fixed as they apply to a different context */
  width: 36px;
  height: 36px;
  /* margin-bottom: 5px; */ /* Handled by wrapper style below */
}

.mini-box-icon {
  /* These can remain fixed */
  width: 20px;
  height: 20px;
}

.drag-overlay-icon {
  /* These can remain fixed */
  width: 24px;
  height: 24px;
}

/* Style the wrapper in PlacedAction */
.placed-action .icon-wrapper {
  width: 36px; /* Match the icon size */
  height: 36px;
  margin-bottom: 5px;
}

/* Style the wrapper in MiniBox */
.mini-box .mini-box-icon-wrapper {
  width: 20px; /* Match the icon size */
  height: 20px;
}

/* Recipe Info Form */
.recipe-info-form {
  background-color: #fff;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
}

.recipe-info-form h2 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #333;
}

.recipe-info-form label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
  color: #555;
}

.recipe-info-form input {
  width: calc(100% - 16px); /* Account for padding */
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

/* Action Palette */
.action-palette {
  /* Optional: Add some padding if needed */
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background-color: #f9f9f9;
  display: flex; /* Use flexbox for layout */
  flex-direction: column; /* Stack navigation and list vertically */
  min-height: 200px; /* Ensure it has some minimum height */
}

.category-navigation {
  display: flex;
  justify-content: space-between; /* Pushes arrows to sides */
  align-items: center;
  padding: 5px 0 10px 0; /* Add some padding below */
  border-bottom: 1px solid #eee; /* Separator line */
  margin-bottom: 10px; /* Space between nav and action list */
}

.category-title {
  margin: 0 10px; /* Space around the title */
  font-size: 1.1em;
  text-align: center;
  flex-grow: 1; /* Allow title to take up space */
  white-space: nowrap; /* Prevent wrapping */
  overflow: hidden; /* Hide overflow */
  text-overflow: ellipsis; /* Add ellipsis if too long */
}

.category-arrow {
  background: none;
  border: 1px solid #ccc;
  border-radius: 4px;
  padding: 2px 8px;
  font-size: 1.2em;
  cursor: pointer;
  line-height: 1;
  transition: background-color 0.2s ease;
}

.category-arrow:hover:not(:disabled) {
  background-color: #eee;
}

.category-arrow:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.action-list {
  /* --- REMOVE --- */
  /* display: flex; */
  /* flex-wrap: wrap; */
  /* justify-content: flex-start; */

  /* --- ADD --- */
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* Create 4 equal columns */
  align-content: start; /* Align rows to the top */

  /* --- KEEP --- */
  gap: 8px; /* Spacing between action items */
  flex-grow: 1; /* Allow list to fill remaining vertical space in the flex parent */
  overflow-y: auto; /* Add scroll if items overflow vertically */
}

.action-item {
  /* Adjust styles if needed, e.g., fixed width */
  /* width: 70px; */
  /* height: 70px; */
  /* ... existing action-item styles ... */
  background-color: #fff;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 5px;
  text-align: center;
  cursor: grab;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center; /* Center content vertically within the fixed height */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  transition: box-shadow 0.2s ease;
  /* --- ADD THIS if text might overflow the fixed height --- */
  overflow: hidden; /* Prevents content spilling out */
}

.action-item:hover {
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
}

.action-item span {
  /* Icon */
  font-size: 1.5em; /* Adjust icon size */
  margin-bottom: 3px;
}

.action-item p {
  /* Name */
  font-size: 0.75em;
  margin: 0;
  line-height: 1.2;
  color: #333;
  /* --- Optional: Prevent text wrapping if needed, use with overflow: hidden --- */
  /* white-space: nowrap; */
  /* text-overflow: ellipsis; */ /* Show ... if text is too long */
  /* width: 100%; */ /* Ensure text takes width for ellipsis */
}

.no-actions-message {
  width: 100%;
  text-align: center;
  color: #888;
  margin-top: 20px;
}

/* Recipe Grid */
.recipe-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  grid-template-rows: repeat(5, 1fr);
  gap: 30px;
  width: 100%; /* Adjust as needed */
  max-width: 650px; /* Example max width */
  aspect-ratio: 1 / 1; /* Maintain square aspect ratio */
  background-color: #e0e0e0;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(199, 4, 4, 0.1);
  margin-bottom: 20px;
  border: 1px solid #ccc;
}

/* Grid Square */
.grid-square {
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative; /* Needed for positioning elements inside */
  min-height: 80px; /* Ensure squares have a minimum size */
  transition: background-color 0.2s ease;
  overflow: visible !important;
}

.grid-square.over {
  background-color: #d3e3fd; /* Highlight when dragging over */
  border-style: dashed;
}

.grid-square.empty {
  background-color: #f0f0f0;
  border-style: dashed;
}

/* Placed Action */
.placed-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 5px;
  width: 100%;
  height: 100%;
  box-sizing: border-box; /* Include padding in size */
  position: relative; /* For positioning the plus button */
  cursor: pointer; /* <-- ADD THIS for visual feedback */
  overflow: visible !important; /* Make absolutely sure overflow is visible */
}

/* Placed Action */
.placed-action {
  /* Inherits flex from style prop now */
  /* display: flex; */
  /* flex-direction: column; */
  /* align-items: center; */
  /* justify-content: center; */ /* Use style prop for centering */
  /* padding: 5px; */ /* Use style prop */
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  position: relative; /* Still relative for its own children if needed */
  /* Remove overflow hidden if it was ever added */
}

.placed-action .icon {
  font-size: 1.8em;
  margin-bottom: 5px;
  user-select: none; /* Prevent text selection on icon */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

.placed-action .label-input {
  width: calc(100% - 10px);
  font-size: 0.8em;
  text-align: center;
  border: 1px solid #eee;
  padding: 3px;
  /* margin-bottom: 5px; */ /* Removed, handled by flex gap or direct style */
  box-sizing: border-box;
  background-color: #fff; /* Ensure it has background */
  z-index: 1; /* Above icon potentially */
}

/* --- REMOVE OR COMMENT OUT Styles for the old container --- */
/*
.mini-boxes-container {
  position: absolute;
  top: 50%;
  right: 0;
  transform: translate(50%, -50%);
  display: flex;
  flex-direction: column;
  gap: 2px;
  background-color: rgba(255, 255, 255, 0.9);
  padding: 4px;
  border-radius: 4px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  z-index: 10;
  pointer-events: auto;
}


/* --- ADJUSTED Add Mini Box Button Styling --- */
/* .add-mini-box-button {
   Remove absolute positioning 
   position: absolute; 
   bottom: 2px; 
   right: 2px; 

   Standard button styling 
  background-color: #4caf50;
  color: white;
  border: none;
  border-radius: 4px; 
   width: 18px; 
   height: 18px;
  padding: 3px 6px;
  font-size: 14px;
   line-height: 16px; 
  cursor: pointer;
  text-align: center;
  margin-top: 5px; 
  align-self: center; 
   z-index: 10; 

  background-color: #4caf50;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 3px 6px;
  font-size: 14px;
  cursor: pointer;
  text-align: center;
  margin-top: 5px;
  align-self: center;
} */

/* --- ADD Styles for the new '+' button on PlacedAction --- */
.placed-action .reveal-mini-box-button {
  position: absolute;
  bottom: 3px;
  right: 3px;
  width: 20px;
  height: 20px;
  font-size: 14px;
  line-height: 18px; /* Center '+' vertically */
  text-align: center;
  padding: 0;
  border-radius: 50%;
  background-color: #e0e0e0;
  border: 1px solid #ccc;
  color: #333;
  cursor: pointer;
  z-index: 5; /* Ensure it's above other content but below drag overlay */
  transition: background-color 0.2s ease;
}

.placed-action .reveal-mini-box-button:hover {
  background-color: #d0d0d0;
}

/* --- RENAME/ADJUST Styles for RIGHT mini-box container --- */
.placed-action .mini-box-container-right {
  /* Renamed from .mini-box-area */
  position: absolute;
  /* Positioning for live view - place it overlapping right edge */
  top: 50%;
  left: 100%; /* Start at the right edge */
  transform: translateY(-50%); /* Center vertically */
  margin-left: -10px; /* Pull back slightly to overlap */

  display: flex; /* Keep flex if needed, though only one item now */
  flex-direction: column;
  gap: 3px;
  z-index: 10;
  pointer-events: auto;
  padding: 0; /* Remove padding if box has its own */
  background-color: transparent; /* Remove container background */
  border-radius: 0; /* Remove container border-radius */
  box-shadow: none; /* Remove container shadow */
}

/* --- ADD Styles for TOP mini-box container --- */
.placed-action .mini-box-container-top {
  position: absolute;
  top: 0; /* Align to top edge */
  left: 50%; /* Center horizontally */
  transform: translate(
    -50%,
    -50%
  ); /* Shift left by half width, up by half height */
  margin-top: -10px; /* Pull up slightly to overlap */
  z-index: 10;
  pointer-events: auto;
  /* Add other base styles if needed (display, etc.) */
}

/* --- ADD Styles for BOTTOM mini-box container --- */
.placed-action .mini-box-container-bottom {
  position: absolute;
  bottom: 0; /* Align to bottom edge */
  left: 50%; /* Center horizontally */
  transform: translate(
    -50%,
    50%
  ); /* Shift left by half width, down by half height */
  margin-bottom: -10px; /* Pull down slightly to overlap */
  z-index: 10;
  pointer-events: auto;
  /* Add other base styles if needed */
}

.add-mini-box-button:hover {
  background-color: #45a049;
}

/* --- Styles for the MiniBox itself (apply universally) --- */
.mini-box {
  border: 1px dashed #aaa;
  background-color: #fff;
  padding: 4px 6px;
  min-height: 35px;
  min-width: 40px;
  display: flex;
  align-items: center;
  justify-content: center; /* Center content */
  border-radius: 3px;
  position: relative;
  box-sizing: border-box;
  cursor: pointer; /* Keep pointer cursor */
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.15); /* Add shadow to box itself */
}

.mini-box.empty {
  background-color: #f0f0f5; /* Lighter background when empty */
}

.mini-box.empty .mini-box-placeholder {
  color: #999;
  font-size: 0.7em;
  text-align: center;
  width: 100%;
}

/* .mini-box:not(.empty) {
  border-style: solid; 
  border-color: #bbb;
} */

/* Highlight when dragging over */
.mini-box.over {
  border-color: dodgerblue;
  border-style: solid;
  background-color: #e0f0ff;
}

.mini-box-content {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}

.mini-box-icon {
  font-size: 1.1em;
}

/* .mini-box-placeholder {
  font-size: 0.7em;
  color: #888;
  font-style: italic;
} */

/* .mini-box-delete-button {
  background: none;
  border: none;
  color: #aaa;
  cursor: pointer;
  font-size: 1.3em;
  line-height: 1;
  padding: 0 2px;
  margin-left: 4px; 
}

.mini-box-delete-button:hover {
  color: #f00;
} */

.mini-box input {
  flex-grow: 1;
  font-size: 0.9em; /* Relative to container */
  border: 1px solid #ccc;
  padding: 3px 4px;
  border-radius: 3px;
  /* margin-right: 3px; */ /* Use gap instead */
}

/* .mini-box button {
  background: #ff4d4d;
  color: white;
  border: none;
  border-radius: 3px;
  cursor: pointer;
  font-size: 0.8em;
  padding: 2px 5px; 
  line-height: 1; 
} */

/* Drag Overlay */
.drag-overlay {
  opacity: 0.8;
  cursor: grabbing;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  z-index: 9999; /* Ensure it's on top */
}

/* Tooltip (Simple browser default) */
[title] {
  cursor: help;
}

/* Buttons */
.action-buttons {
  margin-top: 20px;
  display: flex;
  gap: 10px;
}

.action-buttons button {
  padding: 10px 20px;
  font-size: 1em;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.serve-button {
  background-color: #2196f3;
  color: white;
}

.serve-button:hover {
  background-color: #1976d2;
}

.print-button {
  background-color: #9e9e9e;
  color: white;
}

.print-button:hover {
  background-color: #757575;
}

/* Summary Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background-color: #fff;
  padding: 30px;
  border-radius: 8px;
  max-width: 80%;
  max-height: 80%;
  overflow-y: auto;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  position: relative;
}

.modal-close-button {
  position: absolute;
  top: 10px;
  right: 10px;
  background: none;
  border: none;
  font-size: 1.5em;
  cursor: pointer;
  color: #888;
}
.modal-close-button:hover {
  color: #333;
}

.modal-content h2 {
  margin-top: 0;
  color: #333;
}

.summary-text {
  white-space: pre-wrap; /* Preserve formatting */
  margin-bottom: 20px;
  line-height: 1.6;
  color: #444;
}

.qr-code-container {
  text-align: center;
  margin-top: 20px;
}

.qr-code-container p {
  margin-bottom: 10px;
  color: #666;
}

/* Print Styles */
@media print {
  body {
    margin: 0;
    background-color: #fff;
  }
  .app-container {
    flex-direction: column; /* Stack elements for printing */
  }
  .left-panel,
  .action-buttons,
  .modal-overlay,
  .no-print {
    /* Hide non-essential elements */
    display: none !important; /* Important to override inline styles if any */
  }
  .right-panel {
    flex: none; /* Reset flex */
    width: 100%;
    /* --- ADD: Ensure no extra padding/margin interferes --- */
    padding: 0;
    margin: 0;
    box-sizing: border-box; /* Be explicit */
  }
  .recipe-grid {
    box-shadow: none;
    border: 1px solid #ccc;
    max-width: 100%; /* Keep this */
    page-break-inside: avoid;

    /* --- ADD/OVERRIDE these properties --- */
    width: auto; /* Ensure it tries to use full width */
    gap: 25px; /* Significantly reduce the gap */
    aspect-ratio: 1 / 1; /* Allow it to be non-square */
    padding: 5px; /* Reduce padding if needed */
    margin: 0 auto; /* Center if needed, or just margin: 0; */
    box-sizing: border-box; /* Be explicit */
    /* Optional: Adjust min-height if rows become too small */
    /* grid-template-rows: repeat(5, minmax(80px, auto)); */

    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(5, 1fr);
  }
  .grid-square {
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
    display: flex; /* Keep flex for centering empty state text */
    justify-content: center;
    align-items: center;
    position: relative; /* CRUCIAL: Parent for absolute positioning */
    /* min-height: 80px; */
    transition: none;
    overflow: visible; /* Allow absolutely positioned children to show outside */
    box-sizing: border-box; /* Be explicit */
    overflow: visible !important;
  }
  /* --- Style Print Containers by Position --- */
  .placed-action .mini-box-container-right,
  .placed-action .mini-box-container-top,
  .placed-action .mini-box-container-bottom {
    display: flex; /* Ensure displayed */
    position: absolute;
    transform: none; /* Base reset */
    z-index: 5;
    background-color: transparent;
    box-shadow: none;
    padding: 0;
    gap: 2px;
    border: none;
    margin: 0; /* Base reset */
  }

  .placed-action .mini-box-container-right {
    top: 50%;
    transform: translateY(-50%);
    left: 100%;
    margin-left: 2px; /* Adjust for print gap */
  }

  .placed-action .mini-box-container-top {
    left: 50%;
    transform: translateX(-50%);
    top: 0;
    margin-top: -5px; /* Adjust for print overlap */
  }

  .placed-action .mini-box-container-bottom {
    left: 50%;
    transform: translateX(-50%);
    bottom: 0;
    margin-bottom: -5px; /* Adjust for print overlap */
  }
  /* --- End Print Container Styles --- */

  /* Hide the '+' button on placed actions */
  .placed-action .reveal-mini-box-button {
    display: none !important;
  }

  .placed-action .label-input {
    border: none; /* Make inputs look like text */
    background-color: transparent;
    padding: 1px; /* Minimal padding */
    width: 95%; /* Adjust width slightly if needed */
  }

  /* Ensure icons are visible */
  .placed-action .icon {
    display: block; /* Ensure it's displayed */
  }

  /* Hide placeholders in empty squares */
  .grid-square.empty .empty-placeholder {
    display: none;
  }

  /* Hide mini-box delete button in print */
  .mini-box-delete-button {
    display: none !important;
  }

  /* --- Adjust MiniBox itself for Print --- */
  .mini-box {
    border: 1px solid #ccc;
    padding: 3px 5px;
    background-color: #fff;
    min-height: 28px;
    min-width: 32px;
    line-height: 1.2;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    box-shadow: none; /* No shadow in print */
  }

  .mini-box-placeholder {
    display: none;
  }

  .mini-box-icon {
    /* --- INCREASE Icon Size --- */
    font-size: 1.4em; /* Increased from 0.9em, closer to live view */
    display: inline-block;
    vertical-align: middle;
  }
  /* --- End Mini-Box Adjustments --- */

  /* Ensure the original add button is also hidden if separate */
  .add-mini-box-button {
    /* This might hide the one in the container too, which is fine for print */
    display: none !important;
  }
  .placed-action .label-input,
  .mini-box input {
    border: none; /* Make inputs look like text */
    background-color: transparent;
  }
  .mini-box button {
    display: none; /* Hide mini-box delete button */
  }
}
