# Recipe Builder UI

A React-based web application that allows users to visually create cooking recipes by dragging and dropping actions onto a grid. It includes features for adding related sub-actions (mini-boxes), editing labels, adding notes, and generating a shareable PDF document with a QR code.

## Features

- **Drag & Drop Interface:** Easily drag cooking actions from a palette onto a 5x5 grid.
- **Action Palette:** Browse categorized and paginated cooking actions with icons and descriptions.
- **Recipe Grid:** Arrange actions sequentially or spatially on the grid.
- **Editable Labels:** Click on the label below a placed action to rename it.
- **Mini-Boxes:** Add up to three smaller "mini-box" slots to each main action for related steps or ingredients (drag actions from the palette to fill them).
- **Context Menus:** Right-click on placed actions or mini-boxes to delete them.
- **Recipe Information:** Form to input recipe name, author, total time, and date.
- **Notes:**
  - Dedicated modal to add freeform notes, tips, or variations.
  - Automatic notes generated when an action's label is renamed (`Original Name --> (New Name)`). These notes are automatically removed if the action is deleted.
- **PDF Generation:** Client-side generation of a PDF document summarizing the recipe info, grid layout (with icons), and notes using `@react-pdf/renderer`.
- **Firebase Integration:** Uploads the generated PDF to Firebase Storage.
- **QR Code & Sharing:** Generates a QR code and a direct link to the uploaded PDF for easy sharing and downloading.
- **Printing:** Basic browser print functionality for the current view.
- **Instructions Popup:** A modal displaying visual instructions on how to use the app.

## Setup and Running Locally

1.  **Prerequisites:**

    - Node.js and npm (or yarn) installed.

2.  **Clone the Repository:**

    ```bash
    git clone <your-repository-url>
    cd recipe-builder-final
    ```

3.  **Install Dependencies:**

    ```bash
    npm install
    # or
    yarn install
    ```

4.  **Firebase Setup:**

    - Create a Firebase project at https://console.firebase.google.com/.
    - Enable Firebase Storage.
    - Get your Firebase project configuration (apiKey, authDomain, projectId, storageBucket, etc.).
    - Update the `src/firebase.js` file with your actual Firebase configuration.

5.  **Generate SVG Data for PDF:**

    - If you add or modify SVG icons in the `src/SVG` folder, you need to regenerate the data file used for PDF rendering. Run the script from the project root:

    ```bash
    node src/extract-svg-data.js
    ```

    - This will update `src/iconPdfData.js`.

6.  **Start the Development Server:**
    ```bash
    npm start
    # or
    yarn start
    ```
    The application should now be running on `http://localhost:3000` (or another port if 3000 is busy).

## How It Works

- **Drag and Drop:** `dnd-kit` provides the context and hooks (`useDraggable`, `useDroppable`) to manage dragging actions from the palette or within the grid. `handleDragEnd` in `App.js` contains the logic for updating the `gridItems` state based on the drop target.
- **State Management:** The main `App.js` component holds most of the application state using `useState`, including recipe info, grid items, notes, and modal visibility. Callbacks are passed down to child components to update this state.
- **PDF Generation:** When "Serve" is clicked, `BlobProvider` from `@react-pdf/renderer` is triggered. It uses the `RecipePdfDocument` component (which defines the PDF layout using React-like components) and the data from `iconPdfData.js` (generated by `extract-svg-data.js`) to render the PDF client-side into a Blob. The `PdfGenerationHandler` manages the state updates between `BlobProvider` and `App.js`.
- **PDF Upload & QR:** Once the Blob is ready, it's uploaded to Firebase Storage. The resulting download URL is then used to generate the QR code displayed in the `SummaryModal`.
